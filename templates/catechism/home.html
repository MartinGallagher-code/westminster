{% extends "base.html" %}

{% block title %}Westminster Standards{% endblock %}

{% block content %}

{# ── Section 1: Hero / Welcome ── #}
<div class="text-center py-4 mb-4 border-bottom">
    <h1 class="display-5 fw-bold">Westminster Standards</h1>
    <p class="lead col-lg-8 mx-auto">
        Explore the Westminster Confession of Faith and Catechisms (1647)
        with Scripture proof texts, cross-references, and commentary
        from classic Reformed sources.
    </p>
    <div class="d-flex justify-content-center gap-2">
        <a href="{% url 'catechism:catechism_home' catechism_slug='wsc' %}" class="btn btn-primary">
            Start with the Shorter Catechism
        </a>
        <a href="{% url 'catechism:compare_index' %}" class="btn btn-outline-secondary">
            Compare All Three
        </a>
    </div>
</div>

{# ── Section 2: Question of the Day ── #}
{% if featured %}
<div class="card mb-4 border-primary-subtle">
    <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0">
                <span class="text-primary">{{ featured.catechism.item_name }} of the Day</span>
            </h5>
            <span class="badge text-bg-primary">{{ featured.catechism.abbreviation }}</span>
        </div>
        {% if featured.catechism.is_confession %}
        <p class="question-text fs-5 mb-2">{{ featured.question_text }}</p>
        <p class="answer-text text-body-secondary">{{ featured.answer_text|truncatewords:40 }}</p>
        {% else %}
        <p class="question-text fs-5 mb-2">
            <strong>Q{{ featured.number }}.</strong> {{ featured.question_text }}
        </p>
        <p class="answer-text text-body-secondary">
            <strong>A.</strong> {{ featured.answer_text|truncatewords:40 }}
        </p>
        {% endif %}
        <a href="{{ featured.get_absolute_url }}" class="btn btn-primary btn-sm">
            Read Full {{ featured.catechism.item_name }} &rarr;
        </a>
    </div>
</div>

<details class="mb-4">
    <summary class="text-body-secondary">All daily readings</summary>
    <div class="row g-3 mt-2">
        {% for cat in catechisms %}
        {% if cat.featured_question %}
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">{{ cat.abbreviation }} {{ cat.item_name }} of the Day</h6>
                    {% if cat.is_confession %}
                    <p class="small mb-1"><strong>{{ cat.featured_question.question_text|truncatewords:15 }}</strong></p>
                    {% else %}
                    <p class="small mb-1">
                        <strong>Q{{ cat.featured_question.number }}.</strong>
                        {{ cat.featured_question.question_text|truncatewords:15 }}
                    </p>
                    {% endif %}
                    <a href="{{ cat.featured_question.get_absolute_url }}" class="btn btn-outline-secondary btn-sm">
                        Read &rarr;
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</details>
{% endif %}

{# ── Section 3: The Three Documents ── #}
<h2 class="h5 text-body-secondary mb-3">The Three Documents</h2>
<div class="row g-3 mb-4">
    {% for cat in catechisms %}
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ cat.name }}</h5>
                <p class="text-body-secondary small mb-2">
                    {{ cat.total_questions }} {{ cat.item_name_plural|lower }}
                    {% if cat.year %}&middot; {{ cat.year }}{% endif %}
                </p>
                {% if cat.description %}
                <p class="card-text small flex-grow-1">{{ cat.description|truncatewords:25 }}</p>
                {% endif %}
                <div class="mt-auto">
                    <a href="{{ cat.get_item_list_url }}" class="btn btn-outline-primary btn-sm">
                        Browse {{ cat.item_name_plural }}
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{# ── Section 4: Explore Features ── #}
<h2 class="h5 text-body-secondary mb-3">Explore</h2>
<div class="row g-3 mb-4">
    <div class="col-md-4">
        <div class="card h-100 text-center p-3">
            <div class="card-body">
                <h6 class="card-title">Search</h6>
                <p class="card-text small text-body-secondary">
                    Search across all three documents by keyword.
                </p>
                <a href="{% url 'catechism:search' %}" class="btn btn-outline-primary btn-sm">
                    Search &rarr;
                </a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 text-center p-3">
            <div class="card-body">
                <h6 class="card-title">Scripture Index</h6>
                <p class="card-text small text-body-secondary">
                    Find questions and sections by Bible reference.
                </p>
                <a href="{% url 'catechism:scripture_index' %}" class="btn btn-outline-primary btn-sm">
                    Browse Index &rarr;
                </a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 text-center p-3">
            <div class="card-body">
                <h6 class="card-title">Compare Standards</h6>
                <p class="card-text small text-body-secondary">
                    See how the Confession and Catechisms treat the same topics.
                </p>
                <a href="{% url 'catechism:compare_index' %}" class="btn btn-outline-primary btn-sm">
                    Compare &rarr;
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}
