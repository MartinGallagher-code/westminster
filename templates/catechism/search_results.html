{% extends "base.html" %}

{% block title %}Search{% if query %}: {{ query }}{% endif %} - Westminster Standards{% endblock %}

{% block content %}
<h1 class="mb-3">Search</h1>

<form action="{% url 'catechism:search' %}" method="get" class="mb-4">
    <div class="input-group">
        <input type="search" name="q" class="form-control" placeholder="Search questions and answers..."
               value="{{ query }}">
        <button class="btn btn-primary" type="submit">Search</button>
    </div>
</form>

{% if query %}
<p class="text-muted">
    {% if results %}
        Found {{ results|length }} result{{ results|length|pluralize }} for &ldquo;{{ query }}&rdquo;
    {% else %}
        No results found for &ldquo;{{ query }}&rdquo;
    {% endif %}
</p>

<div class="list-group">
    {% for q in results %}
    <a href="{{ q.get_absolute_url }}" class="list-group-item list-group-item-action">
        <div class="d-flex w-100 justify-content-between">
            <h6 class="mb-1">{{ q.catechism.abbreviation }} Q{{ q.number }}. {{ q.question_text }}</h6>
            <small class="text-muted text-nowrap ms-2">{{ q.topic.name }}</small>
        </div>
        <p class="mb-0 text-muted small">{{ q.answer_text|truncatewords:25 }}</p>
    </a>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
