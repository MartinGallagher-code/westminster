{% extends "base.html" %}

{% block title %}{{ theme.name }} - Compare the Standards{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'catechism:home' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'catechism:compare_list' %}">Compare</a></li>
        <li class="breadcrumb-item active">{{ theme.name }}</li>
    </ol>
</nav>

<!-- Prev/Next theme navigation -->
<div class="d-flex justify-content-between mb-3">
    {% if previous_theme %}
    <a href="{% url 'catechism:compare_theme' theme_slug=previous_theme.slug %}" class="btn btn-outline-secondary btn-sm">
        &larr; {{ previous_theme.name|truncatewords:5 }}
    </a>
    {% else %}<span></span>{% endif %}
    {% if next_theme %}
    <a href="{% url 'catechism:compare_theme' theme_slug=next_theme.slug %}" class="btn btn-outline-secondary btn-sm">
        {{ next_theme.name|truncatewords:5 }} &rarr;
    </a>
    {% else %}<span></span>{% endif %}
</div>

<h1 class="mb-2">{{ theme.name }}</h1>
{% if theme.description %}
<p class="text-muted mb-4">{{ theme.description }}</p>
{% endif %}

<div class="row">
    {% for col in columns %}
    <div class="col-lg-4 mb-4">
        <div class="card h-100">
            <div class="card-header">
                <strong>{{ col.catechism.abbreviation }}</strong>
                <small class="text-muted ms-1">
                    {{ col.catechism.item_prefix }}{{ col.display_start }}{% if col.question_start != col.question_end %}&ndash;{{ col.display_end }}{% endif %}
                </small>
            </div>
            <div class="list-group list-group-flush">
                {% for q in col.questions %}
                <a href="{{ q.get_absolute_url }}" class="list-group-item list-group-item-action">
                    {% if col.catechism.is_confession %}
                    <p class="mb-1 small"><strong>{{ q.question_text }}</strong></p>
                    <p class="mb-0 text-muted small">{{ q.answer_text|truncatewords:20 }}</p>
                    {% else %}
                    <p class="mb-1 small"><strong>Q{{ q.number }}.</strong> {{ q.question_text|truncatewords:15 }}</p>
                    <p class="mb-0 text-muted small"><strong>A.</strong> {{ q.answer_text|truncatewords:20 }}</p>
                    {% endif %}
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% empty %}
    <p class="text-muted">No entries for this theme.</p>
    {% endfor %}
</div>

<!-- Prev/Next (bottom) -->
<div class="d-flex justify-content-between mt-3 mb-4">
    {% if previous_theme %}
    <a href="{% url 'catechism:compare_theme' theme_slug=previous_theme.slug %}" class="btn btn-outline-secondary">
        &larr; {{ previous_theme.name|truncatewords:5 }}
    </a>
    {% else %}<span></span>{% endif %}
    {% if next_theme %}
    <a href="{% url 'catechism:compare_theme' theme_slug=next_theme.slug %}" class="btn btn-outline-secondary">
        {{ next_theme.name|truncatewords:5 }} &rarr;
    </a>
    {% else %}<span></span>{% endif %}
</div>
{% endblock %}
