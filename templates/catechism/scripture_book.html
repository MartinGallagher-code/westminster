{% extends "base.html" %}

{% block title %}{{ book.name }} - Scripture Index{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'catechism:home' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'catechism:scripture_index' %}">Scripture Index</a></li>
        <li class="breadcrumb-item active">{{ book.name }}</li>
    </ol>
</nav>

<h1 class="mb-2">{{ book.name }}</h1>
<p class="text-muted mb-4">{{ total_citations }} citation{{ total_citations|pluralize }} across the Reformed standards</p>

{% for abbr, entries in grouped_entries.items %}
<div class="card mb-4">
    <div class="card-header"><strong>{{ abbr }}</strong></div>
    <div class="list-group list-group-flush">
        {% for entry in entries %}
        <a href="{{ entry.question.get_absolute_url }}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                <span>
                    <strong>{{ entry.question.catechism.item_prefix }}{{ entry.question.display_number }}</strong>
                    {% if not entry.question.catechism.is_prose_document %}&mdash; {{ entry.question.question_text|truncatewords:12 }}{% endif %}
                </span>
                <small class="text-muted">{{ entry.reference }}</small>
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% empty %}
<p class="text-muted">No citations found for this book.</p>
{% endfor %}
{% endblock %}
